---
layout: post
title:  "配置组织结构管理界面"
date:   2020-05-15
visible: 1
---

不同企业都有特殊的组织结构。组织结构通常为树状结构，其中每个节点代表一个单位或部门。企业中的人员都属于某个单位或部门。不同部门的用户在使用企业应用软件时，往往具有不同的权限以及所关注的功能。为此，Ebaas平台提供了定义企业组织结构的功能，以便通过部门来定义用户的数据操作权限和提供个性化的用户界面。

您可以打开DesignStudio客户端，然后“工具” => “创建用户/角色”打开对话框对部门信息进行添加，修改及删除等操作。为了方便系统管理员使用浏览器进行部门信息的管理，Ebaas平台提供了基于Web的部门管理模块。我们这里主要介绍基于Web的部门信息管理功能。

#### 配置部门信息管理模块菜单

配置部门信息管理模块的步骤与角色信息管理模块类似。首先，我们介绍如何配置基于Web的部门信息管理模块。步骤如下：

* 从“开始” => Ebaas => SiteMapStudio打开SiteMapStudio工具；
* 点击“文件” => “打开” => 以admin登录；
* 选择“事务跟踪管理”网站地图 => 选择“系统设置”菜单项 => 右键菜单选择“添加”；
* 在弹出的“添加新项”对话框中 => 输入名称“UnitsManager” => 确认。 如下图所示；

<img src="{{'/assets/img/2018-3-15-创建部门管理菜单.png' | prepend: site.baseurl }}" alt="">

* 展开“系统设置”菜单 => 选择新添加的“UnitsManager”菜单，在“设置”选项卡中按照下表的参数进行设置：

| 设置参数名 | 设置参数值 | 描述 |
|-------|--------|---------|
| 名称 | UnitsManager | 菜单项的名称，必须是唯一的 |
| 显示名 | 部门管理 | 菜单项在用户界面显示的名称 |
| 数据库 | USERINFO 1.0 | 菜单项所指向的数据库 |
| 数据类 | Role | 菜单项所指向的角色数据类 |
| 模块URL | app.smarttables.datagrid({attachment:false}) | 菜单指向的界面模块，该模块是表格管理模块 |
| 图标名称 | fa fa-fw fa-bank | 菜单显示的图标 |
| 描述 | col-xs-4 col-sm-3 col-md-2 page-darkred | 菜单显示的样式 |

点击“模块参数”右边“...”按钮 => 在弹出的“定义参数”框中按照下表设置参数：

| 设置参数名 | 设置参数值 | 描述 |
|-------|--------|---------|
| formTemplate | unitform.htm | 指定添加或修改部门信息的表单模板（系统自带） |
| dataView | unitcn | 指定显示部门列表的数据视图（系统自带） |

菜单的配置结果如下图所示：

<img src="{{'/assets/img/2018-3-15-配置部门管理菜单.png' | prepend: site.baseurl }}" alt="">

保存网站地图。

{% include important.html content="重启Ebaas服务器" %}

#### 测试部门管理功能

* 使用推荐的浏览器访问： http://localhost:8080；
* 登录为用户demo1（密码：888）。由于demo1用户属于“系统管理员”角色，登入进去后，在导航栏会显示“系统设置”菜单，而且在首页会显示“部门管理”菜单项，如下图所示:

<img src="{{'/assets/img/2018-3-15-测试部门管理菜单.png' | prepend: site.baseurl }}" alt="">

点击“部门管理”菜单进入部门管理界面，可以进行查询，添加，修改，或者删除部门信息的操作。如下图所示：

<img src="{{'/assets/img/2018-3-15-使用部门管理菜单.png' | prepend: site.baseurl }}" alt="">

点击右上方的“添加”按键，弹出添加部门表单并填写部门信息，如下图所示：

<img src="{{'/assets/img/2018-3-15-添加部门表单.png' | prepend: site.baseurl }}" alt="">

{% include note.html content="如果添加的部门具有上级部门，要在添加部门表单中选择上级部门。" %}

