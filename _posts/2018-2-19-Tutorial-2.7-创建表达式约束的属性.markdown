---
layout: post
title:  "创建表达式约束的属性"
date:   2018-02-19
visible: 1
---

表达式约束的属性是指该属性的值必须符合某个正则表达式（Regular Expression）的定义。例如，电子邮箱地址，电话号码，邮政编码或用户密码等，都可以通过正则表达式来进行定义。这样可以确保用户输入的值为有效值。

本系统使用C#的正则表达式定义。关于正则表达式的介绍超出本教程的范围，您可以参考相关的资料。

#### 创建表达式约束

我们将创建一个条目约束，叫做“电子邮箱表达式”（EmailValidation），作为“邮箱”属性的约束条件。电子邮箱地址的正则表达式如下：

{% highlight ruby %}
^([\w\.\-]+)@([\w\-]+)((\.(\w){2,3})+)$
{% endhighlight %}

创建表达式约束的步骤如下：

鼠标右键选择DesignStudio左边的“数据约束”文件夹→在弹出条目拦单击“创建”→弹出“添加新客体”输入框，选中“表达式约束”，输入名称：EmailValidation；显示名：电子邮箱表达式。如下图所示： 

<img src="{{'/assets/img/2018-2-19 创建表达式约束的属性1.png' | prepend: site.baseurl }}" alt=""><br>
单击“确认”按钮，并对其作如下参数设置：<br>
•	“数据类型”选择为：“string”<br>
•	“错误信息”输入：“电子邮箱地址格式有误！”。默认的错误信息为“表达式不正确”。所以这里需要定义更明确的信息。<br>
•	“表达式”设置为上述的邮箱地址正则表达式，即：“^([\w\.\-]+)@([\w\-]+)((\.(\w){2,3})+)$<br>
•	其它设置采用默认值<br>
如下图所示：

<img src="{{'/assets/img/2018-2-19 创建表达式约束的属性A2.png' | prepend: site.baseurl }}" alt=""><br>

#### 创建“邮箱”属性

创建“邮箱”属性的步骤这里不做介绍。可以作为自行练习。

请点击左下方的链接回到上一个教程，点击右下方的链接进入下一个教程。如果要暂停学习下一个教程，请注意保存数据模型到数据库。
