---
layout: post
title:  "配置角色管理界面"
date:   2020-05-14
visible: 1
---

企业中的人员都担任一定角色。角色可以是职位，例如，总经理，主任，经理和职工等，也可以为人员的工作性质，例如，系统管理员，工程师，仓库管理员，收样员等。不同角色的用户在使用企业应用软件时，往往具有不同的权限以及所关注的功能。为此，Ebaas平台提供了定义用户角色的功能，以便通过角色定义数据操作权限和提供个性化的用户界面。

您可以打开DesignStudio客户端，然后“工具” => “创建用户/角色”打开对话框对角色信息进行添加，修改及删除等操作。为了方便系统管理员使用浏览器进行角色信息的管理，Ebaas平台提供了基于Web的角色管理模块。我们这里主要介绍基于Web的角色信息管理功能。

#### 配置角色管理模块菜单

首先，我们介绍如何配置基于Web的角色管理模块。步骤如下：

* 从“开始” => Ebaas => SiteMapStudio打开SiteMapStudio工具；
* 点击“文件” => “打开” => 以admin登录；
* 选择“事务跟踪管理”网站地图 => 选择“系统设置”菜单项 => 右键菜单选择“添加”；
* 在弹出的“添加新项”对话框中 => 输入名称“RolesManager” => 确认。 如下图所示；

<img src="{{'/assets/img/2018-3-14-创建角色管理菜单.png' | prepend: site.baseurl }}" alt="">

* 展开“系统设置”菜单 => 选择新添加的“RolesManager”菜单，在“设置”选项卡中按照下表的参数进行设置：

| 设置参数名 | 设置参数值 | 描述 |
|-------|--------|---------|
| 名称 | RolesManager | 菜单项的名称，必须是唯一的 |
| 显示名 | 角色管理 | 菜单项在用户界面显示的名称 |
| 数据库 | USERINFO 1.0 | 菜单项所指向的数据库 |
| 数据类 | Role | 菜单项所指向的角色数据类 |
| 模块URL | app.smarttables.datagrid({attachment:false}) | 菜单指向的界面模块，该模块是二维表格模块 |
| 图标名称 | fa fa-fw fa-group | 菜单显示的图标 |
| 描述 | col-xs-4 col-sm-3 col-md-2 page-gray | 菜单显示的样式 |

点击“模块参数”右边“...”按钮 => 在弹出的“定义参数”框中按照下表设置参数：

| 设置参数名 | 设置参数值 | 描述 |
|-------|--------|---------|
| formTemplate | roleform.htm | 指定添加或修改角色信息的表单模板（系统自带） |
| dataView | rolecn | 指定显示角色列表的数据视图（系统自带） |

菜单的配置结果如下图所示：

<img src="{{'/assets/img/2018-3-14-配置角色管理菜单.png' | prepend: site.baseurl }}" alt="">

保存网站地图。

{% include important.html content="重启Ebaas服务器" %}

#### 测试角色管理功能

* 使用推荐的浏览器访问： http://localhost:8080；
* 登录为用户demo1（密码：888）。由于demo1用户属于“系统管理员”角色，登入进去后，在导航栏会显示“系统设置”菜单，而且在首页会显示“角色管理”菜单项，如下图所示:

<img src="{{'/assets/img/2018-3-14-测试角色管理菜单.png' | prepend: site.baseurl }}" alt="">

点击“角色管理”菜单进入角色管理界面，可以进行查询，添加，修改，或者删除角色信息的操作。如下图所示：

<img src="{{'/assets/img/2018-3-14-使用角色管理菜单.png' | prepend: site.baseurl }}" alt="">

{% include note.html content="所创建的角色保存在UserInfo数据库的Role数据类中。这个数据类中也保存部门信息记录。为了区别，代表角色的记录的类型为‘Function’，而代表部门的记录的类型为‘Unit’。" %}




